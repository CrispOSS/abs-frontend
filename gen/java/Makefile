JAVAC = javac
JAVAC_FLAGS = -sourcepath .

JAVA = java
JAVA_FLAGS = -classpath "lib/:lib/java-cup-11b.jar"

CUP = java_cup.Main
CUPFLAGS = -nopositions -expect 100

JLEX = JLex.Main

all: test

test: absyn ABS/Yylex.class ABS/PrettyPrinter.class ABS/Test.class ABS/ComposVisitor.class ABS/AbstractVisitor.class ABS/FoldVisitor.class ABS/AllVisitor.class ABS/parser.class ABS/sym.class ABS/Test.class

.PHONY: absyn

%.class: %.java
	${JAVAC} ${JAVAC_FLAGS} $^

absyn: ABS/Absyn/Type.java ABS/Absyn/TyUnit.java ABS/Absyn/TyInt.java ABS/Absyn/TyRat.java ABS/Absyn/TyFut.java ABS/Absyn/TyUnderscore.java ABS/Absyn/TypeVar.java ABS/Absyn/ArgType.java ABS/Absyn/ListAnnType.java ABS/Absyn/AnnType.java ABS/Absyn/AnnType_.java ABS/Absyn/QualType.java ABS/Absyn/QualType_.java ABS/Absyn/ListQualType.java ABS/Absyn/QualTypeIdent.java ABS/Absyn/QualTypeIdent_.java ABS/Absyn/ListQualTypeIdent.java ABS/Absyn/Program.java ABS/Absyn/Prog.java ABS/Absyn/ModuleDecl.java ABS/Absyn/ModuleDecl_.java ABS/Absyn/Export.java ABS/Absyn/ExportAny.java ABS/Absyn/ExportAnyFrom.java ABS/Absyn/ExportStar.java ABS/Absyn/ExportStarFrom.java ABS/Absyn/ListExport.java ABS/Absyn/ImportType.java ABS/Absyn/ImportHaskell.java ABS/Absyn/ImportABS.java ABS/Absyn/Import.java ABS/Absyn/ImportAnyFrom.java ABS/Absyn/ImportStarFrom.java ABS/Absyn/ListImport.java ABS/Absyn/AnyIdent.java ABS/Absyn/AnyIdentI.java ABS/Absyn/AnyIdentT.java ABS/Absyn/ListAnyIdent.java ABS/Absyn/AnnDecl.java ABS/Absyn/AnnDecl_.java ABS/Absyn/Decl.java ABS/Absyn/TypeDecl.java ABS/Absyn/DataDecl.java ABS/Absyn/ParDataDecl.java ABS/Absyn/Fun.java ABS/Absyn/ParFun.java ABS/Absyn/InterfDecl.java ABS/Absyn/ExtendsDecl.java ABS/Absyn/ClassDecl.java ABS/Absyn/ClassParamDecl.java ABS/Absyn/ClassImplements.java ABS/Absyn/ClassParamImplements.java ABS/Absyn/ConstrIdent.java ABS/Absyn/UnaryConstr.java ABS/Absyn/MultConstr.java ABS/Absyn/ConstrType.java ABS/Absyn/EmptyConstrType.java ABS/Absyn/RecordConstrType.java ABS/Absyn/ListConstrType.java ABS/Absyn/ListTypeIdent.java ABS/Absyn/ListConstrIdent.java ABS/Absyn/MethSig.java ABS/Absyn/MethSig_.java ABS/Absyn/ListMethSig.java ABS/Absyn/BodyDecl.java ABS/Absyn/FieldDecl.java ABS/Absyn/FieldDeclAss.java ABS/Absyn/MethDecl.java ABS/Absyn/ListBodyDecl.java ABS/Absyn/Block.java ABS/Absyn/Block_.java ABS/Absyn/MaybeBlock.java ABS/Absyn/JustBlock.java ABS/Absyn/NoBlock.java ABS/Absyn/FunBody.java ABS/Absyn/Builtin.java ABS/Absyn/PureBody.java ABS/Absyn/ListAnnDecl.java ABS/Absyn/ListStm.java ABS/Absyn/Param.java ABS/Absyn/Par.java ABS/Absyn/ListParam.java ABS/Absyn/PureExp.java ABS/Absyn/Let.java ABS/Absyn/If.java ABS/Absyn/Case.java ABS/Absyn/EOr.java ABS/Absyn/EAnd.java ABS/Absyn/EEq.java ABS/Absyn/ENeq.java ABS/Absyn/ELt.java ABS/Absyn/ELe.java ABS/Absyn/EGt.java ABS/Absyn/EGe.java ABS/Absyn/EAdd.java ABS/Absyn/ESub.java ABS/Absyn/EMul.java ABS/Absyn/EDiv.java ABS/Absyn/EMod.java ABS/Absyn/ELogNeg.java ABS/Absyn/EIntNeg.java ABS/Absyn/ECall.java ABS/Absyn/ENaryCall.java ABS/Absyn/ELit.java ABS/Absyn/EVar.java ABS/Absyn/EThis.java ABS/Absyn/EUnaryConstr.java ABS/Absyn/EMultConstr.java ABS/Absyn/CaseBranch.java ABS/Absyn/CBranch.java ABS/Absyn/ListCaseBranch.java ABS/Absyn/Pattern.java ABS/Absyn/PIdent.java ABS/Absyn/PLit.java ABS/Absyn/PUnaryConstr.java ABS/Absyn/PMultConstr.java ABS/Absyn/PUnderscore.java ABS/Absyn/ListPattern.java ABS/Absyn/Stm.java ABS/Absyn/SExp.java ABS/Absyn/SBlock.java ABS/Absyn/SWhile.java ABS/Absyn/SReturn.java ABS/Absyn/SAss.java ABS/Absyn/SFieldAss.java ABS/Absyn/SDec.java ABS/Absyn/SDecAss.java ABS/Absyn/SIf.java ABS/Absyn/SIfElse.java ABS/Absyn/SAwait.java ABS/Absyn/SSuspend.java ABS/Absyn/SSkip.java ABS/Absyn/SAssert.java ABS/Absyn/Guard.java ABS/Absyn/VarGuard.java ABS/Absyn/FieldGuard.java ABS/Absyn/ExpGuard.java ABS/Absyn/AndGuard.java ABS/Absyn/Literal.java ABS/Absyn/LNull.java ABS/Absyn/LThis.java ABS/Absyn/LStr.java ABS/Absyn/LInt.java ABS/Absyn/EffExp.java ABS/Absyn/New.java ABS/Absyn/NewLocal.java ABS/Absyn/SyncCall.java ABS/Absyn/ThisSyncCall.java ABS/Absyn/AsyncCall.java ABS/Absyn/ThisAsyncCall.java ABS/Absyn/Get.java ABS/Absyn/ListPureExp.java ABS/Absyn/Exp.java ABS/Absyn/ExpP.java ABS/Absyn/ExpE.java ABS/Absyn/Ann.java ABS/Absyn/SimpleAnn.java ABS/Absyn/ListAnn.java
	${JAVAC} ${JAVAC_FLAGS} $^

ABS/Yylex.java: ABS/Yylex
	${JAVA} ${JAVA_FLAGS} ${JLEX} ABS/Yylex

ABS/sym.java ABS/parser.java: ABS/ABS.cup
	${JAVA} ${JAVA_FLAGS} ${CUP} ${CUPFLAGS} ABS/ABS.cup
	mv sym.java parser.java ABS/

ABS/Yylex.class: ABS/Yylex.java ABS/sym.java

ABS/sym.class: ABS/sym.java

ABS/parser.class: ABS/parser.java ABS/sym.java

ABS/PrettyPrinter.class: ABS/PrettyPrinter.java

clean:
	rm -f ABS/Absyn/*.class ABS/*.class
	rm -f .dvi ABS.aux ABS.log ABS.ps  *.class

distclean: vclean

vclean:
	 rm -f ABS/Absyn/Type.java ABS/Absyn/TyUnit.java ABS/Absyn/TyInt.java ABS/Absyn/TyRat.java ABS/Absyn/TyFut.java ABS/Absyn/TyUnderscore.java ABS/Absyn/TypeVar.java ABS/Absyn/ArgType.java ABS/Absyn/ListAnnType.java ABS/Absyn/AnnType.java ABS/Absyn/AnnType_.java ABS/Absyn/QualType.java ABS/Absyn/QualType_.java ABS/Absyn/ListQualType.java ABS/Absyn/QualTypeIdent.java ABS/Absyn/QualTypeIdent_.java ABS/Absyn/ListQualTypeIdent.java ABS/Absyn/Program.java ABS/Absyn/Prog.java ABS/Absyn/ModuleDecl.java ABS/Absyn/ModuleDecl_.java ABS/Absyn/Export.java ABS/Absyn/ExportAny.java ABS/Absyn/ExportAnyFrom.java ABS/Absyn/ExportStar.java ABS/Absyn/ExportStarFrom.java ABS/Absyn/ListExport.java ABS/Absyn/ImportType.java ABS/Absyn/ImportHaskell.java ABS/Absyn/ImportABS.java ABS/Absyn/Import.java ABS/Absyn/ImportAnyFrom.java ABS/Absyn/ImportStarFrom.java ABS/Absyn/ListImport.java ABS/Absyn/AnyIdent.java ABS/Absyn/AnyIdentI.java ABS/Absyn/AnyIdentT.java ABS/Absyn/ListAnyIdent.java ABS/Absyn/AnnDecl.java ABS/Absyn/AnnDecl_.java ABS/Absyn/Decl.java ABS/Absyn/TypeDecl.java ABS/Absyn/DataDecl.java ABS/Absyn/ParDataDecl.java ABS/Absyn/Fun.java ABS/Absyn/ParFun.java ABS/Absyn/InterfDecl.java ABS/Absyn/ExtendsDecl.java ABS/Absyn/ClassDecl.java ABS/Absyn/ClassParamDecl.java ABS/Absyn/ClassImplements.java ABS/Absyn/ClassParamImplements.java ABS/Absyn/ConstrIdent.java ABS/Absyn/UnaryConstr.java ABS/Absyn/MultConstr.java ABS/Absyn/ConstrType.java ABS/Absyn/EmptyConstrType.java ABS/Absyn/RecordConstrType.java ABS/Absyn/ListConstrType.java ABS/Absyn/ListTypeIdent.java ABS/Absyn/ListConstrIdent.java ABS/Absyn/MethSig.java ABS/Absyn/MethSig_.java ABS/Absyn/ListMethSig.java ABS/Absyn/BodyDecl.java ABS/Absyn/FieldDecl.java ABS/Absyn/FieldDeclAss.java ABS/Absyn/MethDecl.java ABS/Absyn/ListBodyDecl.java ABS/Absyn/Block.java ABS/Absyn/Block_.java ABS/Absyn/MaybeBlock.java ABS/Absyn/JustBlock.java ABS/Absyn/NoBlock.java ABS/Absyn/FunBody.java ABS/Absyn/Builtin.java ABS/Absyn/PureBody.java ABS/Absyn/ListAnnDecl.java ABS/Absyn/ListStm.java ABS/Absyn/Param.java ABS/Absyn/Par.java ABS/Absyn/ListParam.java ABS/Absyn/PureExp.java ABS/Absyn/Let.java ABS/Absyn/If.java ABS/Absyn/Case.java ABS/Absyn/EOr.java ABS/Absyn/EAnd.java ABS/Absyn/EEq.java ABS/Absyn/ENeq.java ABS/Absyn/ELt.java ABS/Absyn/ELe.java ABS/Absyn/EGt.java ABS/Absyn/EGe.java ABS/Absyn/EAdd.java ABS/Absyn/ESub.java ABS/Absyn/EMul.java ABS/Absyn/EDiv.java ABS/Absyn/EMod.java ABS/Absyn/ELogNeg.java ABS/Absyn/EIntNeg.java ABS/Absyn/ECall.java ABS/Absyn/ENaryCall.java ABS/Absyn/ELit.java ABS/Absyn/EVar.java ABS/Absyn/EThis.java ABS/Absyn/EUnaryConstr.java ABS/Absyn/EMultConstr.java ABS/Absyn/CaseBranch.java ABS/Absyn/CBranch.java ABS/Absyn/ListCaseBranch.java ABS/Absyn/Pattern.java ABS/Absyn/PIdent.java ABS/Absyn/PLit.java ABS/Absyn/PUnaryConstr.java ABS/Absyn/PMultConstr.java ABS/Absyn/PUnderscore.java ABS/Absyn/ListPattern.java ABS/Absyn/Stm.java ABS/Absyn/SExp.java ABS/Absyn/SBlock.java ABS/Absyn/SWhile.java ABS/Absyn/SReturn.java ABS/Absyn/SAss.java ABS/Absyn/SFieldAss.java ABS/Absyn/SDec.java ABS/Absyn/SDecAss.java ABS/Absyn/SIf.java ABS/Absyn/SIfElse.java ABS/Absyn/SAwait.java ABS/Absyn/SSuspend.java ABS/Absyn/SSkip.java ABS/Absyn/SAssert.java ABS/Absyn/Guard.java ABS/Absyn/VarGuard.java ABS/Absyn/FieldGuard.java ABS/Absyn/ExpGuard.java ABS/Absyn/AndGuard.java ABS/Absyn/Literal.java ABS/Absyn/LNull.java ABS/Absyn/LThis.java ABS/Absyn/LStr.java ABS/Absyn/LInt.java ABS/Absyn/EffExp.java ABS/Absyn/New.java ABS/Absyn/NewLocal.java ABS/Absyn/SyncCall.java ABS/Absyn/ThisSyncCall.java ABS/Absyn/AsyncCall.java ABS/Absyn/ThisAsyncCall.java ABS/Absyn/Get.java ABS/Absyn/ListPureExp.java ABS/Absyn/Exp.java ABS/Absyn/ExpP.java ABS/Absyn/ExpE.java ABS/Absyn/Ann.java ABS/Absyn/SimpleAnn.java ABS/Absyn/ListAnn.java ABS/Absyn/Type.class ABS/Absyn/TyUnit.class ABS/Absyn/TyInt.class ABS/Absyn/TyRat.class ABS/Absyn/TyFut.class ABS/Absyn/TyUnderscore.class ABS/Absyn/TypeVar.class ABS/Absyn/ArgType.class ABS/Absyn/ListAnnType.class ABS/Absyn/AnnType.class ABS/Absyn/AnnType_.class ABS/Absyn/QualType.class ABS/Absyn/QualType_.class ABS/Absyn/ListQualType.class ABS/Absyn/QualTypeIdent.class ABS/Absyn/QualTypeIdent_.class ABS/Absyn/ListQualTypeIdent.class ABS/Absyn/Program.class ABS/Absyn/Prog.class ABS/Absyn/ModuleDecl.class ABS/Absyn/ModuleDecl_.class ABS/Absyn/Export.class ABS/Absyn/ExportAny.class ABS/Absyn/ExportAnyFrom.class ABS/Absyn/ExportStar.class ABS/Absyn/ExportStarFrom.class ABS/Absyn/ListExport.class ABS/Absyn/ImportType.class ABS/Absyn/ImportHaskell.class ABS/Absyn/ImportABS.class ABS/Absyn/Import.class ABS/Absyn/ImportAnyFrom.class ABS/Absyn/ImportStarFrom.class ABS/Absyn/ListImport.class ABS/Absyn/AnyIdent.class ABS/Absyn/AnyIdentI.class ABS/Absyn/AnyIdentT.class ABS/Absyn/ListAnyIdent.class ABS/Absyn/AnnDecl.class ABS/Absyn/AnnDecl_.class ABS/Absyn/Decl.class ABS/Absyn/TypeDecl.class ABS/Absyn/DataDecl.class ABS/Absyn/ParDataDecl.class ABS/Absyn/Fun.class ABS/Absyn/ParFun.class ABS/Absyn/InterfDecl.class ABS/Absyn/ExtendsDecl.class ABS/Absyn/ClassDecl.class ABS/Absyn/ClassParamDecl.class ABS/Absyn/ClassImplements.class ABS/Absyn/ClassParamImplements.class ABS/Absyn/ConstrIdent.class ABS/Absyn/UnaryConstr.class ABS/Absyn/MultConstr.class ABS/Absyn/ConstrType.class ABS/Absyn/EmptyConstrType.class ABS/Absyn/RecordConstrType.class ABS/Absyn/ListConstrType.class ABS/Absyn/ListTypeIdent.class ABS/Absyn/ListConstrIdent.class ABS/Absyn/MethSig.class ABS/Absyn/MethSig_.class ABS/Absyn/ListMethSig.class ABS/Absyn/BodyDecl.class ABS/Absyn/FieldDecl.class ABS/Absyn/FieldDeclAss.class ABS/Absyn/MethDecl.class ABS/Absyn/ListBodyDecl.class ABS/Absyn/Block.class ABS/Absyn/Block_.class ABS/Absyn/MaybeBlock.class ABS/Absyn/JustBlock.class ABS/Absyn/NoBlock.class ABS/Absyn/FunBody.class ABS/Absyn/Builtin.class ABS/Absyn/PureBody.class ABS/Absyn/ListAnnDecl.class ABS/Absyn/ListStm.class ABS/Absyn/Param.class ABS/Absyn/Par.class ABS/Absyn/ListParam.class ABS/Absyn/PureExp.class ABS/Absyn/Let.class ABS/Absyn/If.class ABS/Absyn/Case.class ABS/Absyn/EOr.class ABS/Absyn/EAnd.class ABS/Absyn/EEq.class ABS/Absyn/ENeq.class ABS/Absyn/ELt.class ABS/Absyn/ELe.class ABS/Absyn/EGt.class ABS/Absyn/EGe.class ABS/Absyn/EAdd.class ABS/Absyn/ESub.class ABS/Absyn/EMul.class ABS/Absyn/EDiv.class ABS/Absyn/EMod.class ABS/Absyn/ELogNeg.class ABS/Absyn/EIntNeg.class ABS/Absyn/ECall.class ABS/Absyn/ENaryCall.class ABS/Absyn/ELit.class ABS/Absyn/EVar.class ABS/Absyn/EThis.class ABS/Absyn/EUnaryConstr.class ABS/Absyn/EMultConstr.class ABS/Absyn/CaseBranch.class ABS/Absyn/CBranch.class ABS/Absyn/ListCaseBranch.class ABS/Absyn/Pattern.class ABS/Absyn/PIdent.class ABS/Absyn/PLit.class ABS/Absyn/PUnaryConstr.class ABS/Absyn/PMultConstr.class ABS/Absyn/PUnderscore.class ABS/Absyn/ListPattern.class ABS/Absyn/Stm.class ABS/Absyn/SExp.class ABS/Absyn/SBlock.class ABS/Absyn/SWhile.class ABS/Absyn/SReturn.class ABS/Absyn/SAss.class ABS/Absyn/SFieldAss.class ABS/Absyn/SDec.class ABS/Absyn/SDecAss.class ABS/Absyn/SIf.class ABS/Absyn/SIfElse.class ABS/Absyn/SAwait.class ABS/Absyn/SSuspend.class ABS/Absyn/SSkip.class ABS/Absyn/SAssert.class ABS/Absyn/Guard.class ABS/Absyn/VarGuard.class ABS/Absyn/FieldGuard.class ABS/Absyn/ExpGuard.class ABS/Absyn/AndGuard.class ABS/Absyn/Literal.class ABS/Absyn/LNull.class ABS/Absyn/LThis.class ABS/Absyn/LStr.class ABS/Absyn/LInt.class ABS/Absyn/EffExp.class ABS/Absyn/New.class ABS/Absyn/NewLocal.class ABS/Absyn/SyncCall.class ABS/Absyn/ThisSyncCall.class ABS/Absyn/AsyncCall.class ABS/Absyn/ThisAsyncCall.class ABS/Absyn/Get.class ABS/Absyn/ListPureExp.class ABS/Absyn/Exp.class ABS/Absyn/ExpP.class ABS/Absyn/ExpE.class ABS/Absyn/Ann.class ABS/Absyn/SimpleAnn.class ABS/Absyn/ListAnn.class
	 rm -f ABS/Absyn/*.class
	 rmdir ABS/Absyn/
	 rm -f ABS/Yylex ABS/ABS.cup ABS/Yylex.java ABS/VisitSkel.java ABS/ComposVisitor.java ABS/AbstractVisitor.java ABS/FoldVisitor.java ABS/AllVisitor.java ABS/PrettyPrinter.java ABS/Skeleton.java ABS/Test.java ABS/sym.java ABS/parser.java ABS/*.class
	rm -f Makefile
	rmdir -p ABS/

